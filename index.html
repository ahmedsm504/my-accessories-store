<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ุงูููุงูู | ูุชุฌุฑู ุงูุฅููุชุฑููู ุงูุฃูู</title>
    <meta name="description" content="ุงูููุงูู - ุฃูุถู ูุชุฌุฑ ุฅููุชุฑููู ูุฅูุณุณูุงุฑุงุช ุงูุฌูุงูุงุช ูุงูููุจููุชุฑ - ุดูุงุญู ุฃุตููุฉุ ูุงุจูุงุช ูููุฉุ ุณูุงุนุงุช ุนุงููุฉ ุงูุฌูุฏุฉ"
    
    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;700;900&family=Tajawal:wght@400;500;700;800&family=Almarai:wght@400;700;800&display=swap" rel="stylesheet">
    
    <!-- Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    
    <!-- Styles -->
    <link rel="stylesheet" href="styles.css">
    
    <!-- Supabase -->
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
</head>
<body>
    <!-- ========== ุงููุชุฌุฑ ุงูุนุงู ========== -->
    <div class="public-container" id="publicContainer">
        <header class="header" id="mainHeader">
            <div class="header-content">
                <a href="#" class="logo" onclick="showStore(); return false;">
                    <div class="logo-icon">
                        <i class="fas fa-shopping-bag"></i>
                    </div>
                    <div class="logo-text">
                        <span class="logo-title">ุงูููุงูู</span>
                        <span class="logo-subtitle">ุชุณูู ุจุฐูุงุก โข ูููุฑ ุจุณูููุฉ</span>
                    </div>
                </a>
                
                <div class="header-actions">
                    <button class="cart-btn" onclick="openCartModal()" title="ุณูุฉ ุงูุชุณูู">
                        <i class="fas fa-shopping-cart"></i>
                        <span class="cart-count" id="cartCount">0</span>
                    </button>
                    
                    <button class="admin-btn" onclick="openAdminLoginModal()">
                        <i class="fas fa-user-shield"></i>
                        <span>ููุญุฉ ุงูุชุญูู</span>
                    </button>
                </div>
            </div>
        </header>
        
        <main class="store-content">
            <section class="hero-section">
                <div class="hero-bg"></div>
                <div class="hero-content">
                    <h1 class="hero-title">
                        <span class="hero-emoji">๐๏ธ</span>
                        ุงูููุงูู - ุชุณูู ุจุฐูุงุก ูู ููุฒูู
                    </h1>
                    <p class="hero-subtitle">ุฃูุถู ุงูุฃุณุนุงุฑ โข ุฌูุฏุฉ ูุถูููุฉ โข ุชูุตูู ุณุฑูุน โข ุชุฌุฑุจุฉ ุชุณูู ููุชุนุฉ</p>
                    
                    <div class="hero-features">
                        <div class="feature">
                            <div class="feature-icon"><i class="fas fa-rocket"></i></div>
                            <span>ุชูุตูู ููุฑู</span>
                        </div>
                        <div class="feature">
                            <div class="feature-icon"><i class="fas fa-certificate"></i></div>
                            <span>ุถูุงู ุฃุตูู</span>
                        </div>
                        <div class="feature">
                            <div class="feature-icon"><i class="fas fa-headphones-alt"></i></div>
                            <span>ุฏุนู 24/7</span>
                        </div>
                        <div class="feature">
                            <div class="feature-icon"><i class="fas fa-check-circle"></i></div>
                            <span>ููุชุฌุงุช ูุนุชูุฏุฉ</span>
                        </div>
                    </div>
                </div>
            </section>
            
            <section class="store-filters">
                <div class="search-box">
                    <i class="fas fa-search search-icon"></i>
                    <input type="text" id="searchInput" placeholder="ุงุจุญุซ ุนู ุดุงุญูุ ูุงุจูุ ุณูุงุนุฉ...">
                    <button class="search-btn" onclick="searchProducts()">
                        <span>ุจุญุซ</span>
                        <i class="fas fa-arrow-left"></i>
                    </button>
                </div>
                
                <div class="category-filters" id="categoryFilters"></div>
            </section>
            
            <div class="products-grid" id="productsContainer"></div>
        </main>
        
        <footer class="footer">
            <p>ยฉ 2024 ุงูููุงูู - ูุชุฌุฑู ุงูุฅููุชุฑููู ุงูุฃูู | ุฌููุน ุงูุญููู ูุญููุธุฉ</p>
        </footer>
    </div>
    
    <!-- ========== ููุญุฉ ุชุญูู ุงููุฏูุฑ ========== -->
    <div class="admin-container" id="adminContainer">
        <header class="header admin-header">
            <div class="header-content">
                <div class="logo">
                    <div class="logo-icon admin-icon">
                        <i class="fas fa-shield-halved"></i>
                    </div>
                    <div class="logo-text">
                        <span class="logo-title">ููุญุฉ ุงูุชุญูู</span>
                        <span class="logo-subtitle">ุฅุฏุงุฑุฉ ุดุงููุฉ</span>
                    </div>
                </div>
                
                <div class="header-actions">
                    <div class="admin-info">
                        <i class="fas fa-phone-alt"></i>
                        <span id="adminPhoneNumber">01XXXXXXXXX</span>
                    </div>
                    <button class="admin-btn logout-btn" onclick="logoutAdmin()">
                        <i class="fas fa-sign-out-alt"></i>
                        <span>ุฎุฑูุฌ</span>
                    </button>
                </div>
            </div>
        </header>
        
        <nav class="admin-nav">
            <button class="nav-tab active" onclick="showAdminPage('orders', this)">
                <i class="fas fa-clipboard-list"></i>
                <span>ุงูุทูุจุงุช</span>
            </button>
            <button class="nav-tab" onclick="showAdminPage('products', this)">
                <i class="fas fa-boxes"></i>
                <span>ุงูููุชุฌุงุช</span>
            </button>
            <button class="nav-tab" onclick="showAdminPage('add-product', this)">
                <i class="fas fa-plus-square"></i>
                <span>ุฅุถุงูุฉ ููุชุฌ</span>
            </button>
            <button class="nav-tab" onclick="showAdminPage('categories', this)">
                <i class="fas fa-tags"></i>
                <span>ุงูุชุตูููุงุช</span>
            </button>
            <button class="nav-tab" onclick="showAdminPage('settings', this)">
                <i class="fas fa-cogs"></i>
                <span>ุงูุฅุนุฏุงุฏุงุช</span>
            </button>
        </nav>
        
        <main class="admin-content">
            <!-- ุงูุทูุจุงุช -->
            <div class="admin-page active" id="ordersPage">
                <div class="content-card">
                    <div class="card-header">
                        <h2 class="card-title">
                            <i class="fas fa-clipboard-list"></i>
                            ุฅุฏุงุฑุฉ ุงูุทูุจุงุช
                        </h2>
                        <button class="btn btn-primary" onclick="refreshOrders()">
                            <i class="fas fa-sync-alt"></i>
                            ุชุญุฏูุซ
                        </button>
                    </div>
                    
                    <div class="contact-info">
                        <div class="contact-header">
                            <i class="fas fa-phone-volume"></i>
                            <h3>ุฃุฑูุงู ุงูุชูุงุตู ุงูุณุฑูุน</h3>
                        </div>
                        <p>ุชูุงุตู ูุน ุงูุฒุจุงุฆู ุนุจุฑ ุงููุงุชุณุงุจ ูุชุฃููุฏ ุงูุทูุจุงุช</p>
                        <div class="contact-numbers" id="orderContacts"></div>
                    </div>
                    
                    <div class="orders-grid" id="ordersContainer"></div>
                </div>
            </div>
            
            <!-- ุงูููุชุฌุงุช -->
            <div class="admin-page" id="productsPage">
                <div class="content-card">
                    <div class="card-header">
                        <h2 class="card-title">
                            <i class="fas fa-boxes"></i>
                            ุฅุฏุงุฑุฉ ุงูููุชุฌุงุช
                        </h2>
                        <button class="btn btn-primary" onclick="showAdminPage('add-product')">
                            <i class="fas fa-plus"></i>
                            ููุชุฌ ุฌุฏูุฏ
                        </button>
                    </div>
                    
                    <div class="search-box admin-search">
                        <i class="fas fa-search search-icon"></i>
                        <input type="text" id="adminSearchInput" placeholder="ุงุจุญุซ ูู ุงูููุชุฌุงุช..." onkeyup="adminSearchProducts()">
                    </div>
                    
                    <div class="category-filters" id="adminCategoryFilters"></div>
                    <div class="products-grid" id="adminProductsContainer"></div>
                </div>
            </div>
            
            <!-- ุฅุถุงูุฉ ููุชุฌ -->
            <div class="admin-page" id="add-productPage">
                <div class="content-card">
                    <div class="card-header">
                        <h2 class="card-title" id="productFormTitle">
                            <i class="fas fa-plus-square"></i>
                            ุฅุถุงูุฉ ููุชุฌ ุฌุฏูุฏ
                        </h2>
                        <button class="btn btn-secondary" onclick="showAdminPage('products')">
                            <i class="fas fa-arrow-right"></i>
                            ุฑุฌูุน
                        </button>
                    </div>
                    
                    <form id="productForm" onsubmit="saveProduct(event)" class="product-form">
                        <input type="hidden" id="productId">
                        <input type="hidden" id="currentImageUrl">
                        
                        <div class="form-grid">
                            <div class="form-group">
                                <label><i class="fas fa-tag"></i> ุงุณู ุงูููุชุฌ *</label>
                                <input type="text" id="productName" required placeholder="ูุซุงู: ุดุงุญู ุณุงูุณููุฌ 25 ูุงุช">
                            </div>
                            
                            <div class="form-group">
                                <label><i class="fas fa-list-ul"></i> ุงูุชุตููู *</label>
                                <select id="productCategory" required>
                                    <option value="">ุงุฎุชุฑ ุงูุชุตููู</option>
                                </select>
                            </div>
                            
                            <div class="form-group">
                                <label><i class="fas fa-money-bill-wave"></i> ุงูุณุนุฑ (ุฌ.ู) *</label>
                                <input type="number" id="productPrice" required min="0" step="0.01" placeholder="0.00">
                            </div>
                            
                            <div class="form-group">
                                <label><i class="fas fa-layer-group"></i> ุงููููุฉ *</label>
                                <input type="number" id="productQuantity" required min="0" placeholder="0">
                            </div>
                            
                            <div class="form-group">
                                <label><i class="fas fa-toggle-on"></i> ุงูุญุงูุฉ *</label>
                                <select id="productStatus" required>
                                    <option value="available">ูุชููุฑ</option>
                                    <option value="unavailable">ุบูุฑ ูุชููุฑ</option>
                                </select>
                            </div>
                        </div>
                        
                        <div class="form-group full-width">
                            <label><i class="fas fa-images"></i> ุตูุฑุฉ ุงูููุชุฌ</label>
                            <div class="image-upload-container">
                                <div class="image-preview" id="imagePreview">
                                    <i class="fas fa-cloud-upload-alt"></i>
                                    <p>ุงููุฑ ุฃู ุงุณุญุจ ุงูุตูุฑุฉ ููุง</p>
                                    <small>ุฃูุตู ุญุฌู: 10 MB โข ุณูุชู ุงูุถุบุท ุชููุงุฆูุงู</small>
                                </div>
                                
                                <div class="image-upload-controls">
                                    <input type="file" id="productImage" accept="image/*" style="display:none" onchange="handleImageSelect(event)">
                                    <button type="button" class="btn btn-secondary" onclick="document.getElementById('productImage').click()">
                                        <i class="fas fa-upload"></i>
                                        ุงุฎุชุฑ ุตูุฑุฉ
                                    </button>
                                    <button type="button" class="btn btn-danger" onclick="removeProductImage()" id="removeImageBtn" style="display:none">
                                        <i class="fas fa-trash-alt"></i>
                                        ุญุฐู
                                    </button>
                                </div>
                                
                                <div class="upload-progress" id="uploadProgress" style="display:none">
                                    <div class="progress-bar">
                                        <div class="progress-fill" id="progressFill"></div>
                                    </div>
                                    <p id="progressText">ุฌุงุฑู ุงูุฑูุน... 0%</p>
                                </div>
                                
                                <div class="upload-info">
                                    <i class="fas fa-info-circle"></i>
                                    <span>ุณูุชู ุถุบุท ุงูุตูุฑุฉ ุชููุงุฆูุงู ุฅูู 500 KB ูุชุตุบูุฑูุง ุฅูู 800ร800 ุจูุณู</span>
                                </div>
                            </div>
                        </div>
                        
                        <div class="form-group full-width">
                            <label><i class="fas fa-align-right"></i> ุงููุตู</label>
                            <textarea id="productDescription" placeholder="ูุตู ุชูุตููู ููููุชุฌ..." rows="5"></textarea>
                        </div>
                        
                        <div class="form-actions">
                            <button type="submit" class="btn btn-primary" id="productSubmitBtn">
                                <i class="fas fa-save"></i>
                                ุญูุธ ุงูููุชุฌ
                            </button>
                            <button type="button" class="btn btn-secondary" onclick="resetProductForm()">
                                <i class="fas fa-redo"></i>
                                ุฅุนุงุฏุฉ ุชุนููู
                            </button>
                        </div>
                    </form>
                </div>
            </div>
            
            <!-- ุงูุชุตูููุงุช -->
            <div class="admin-page" id="categoriesPage">
                <div class="content-card">
                    <div class="card-header">
                        <h2 class="card-title">
                            <i class="fas fa-tags"></i>
                            ุฅุฏุงุฑุฉ ุงูุชุตูููุงุช
                        </h2>
                        <button class="btn btn-secondary" onclick="showAdminPage('products')">
                            <i class="fas fa-arrow-right"></i>
                            ุฑุฌูุน
                        </button>
                    </div>
                    
                    <div class="info-banner">
                        <i class="fas fa-lightbulb"></i>
                        <div>
                            <h4>ูุตูุญุฉ ูููุฉ</h4>
                            <p>ูุธูู ููุชุฌุงุชู ูู ุชุตูููุงุช ูุงุถุญุฉ ูุชุณููู ุงูุจุญุซ ุนูู ุงูุฒุจุงุฆู</p>
                        </div>
                    </div>
                    
                    <div class="category-form-card">
                        <h3><i class="fas fa-plus-circle"></i> ุฅุถุงูุฉ / ุชุนุฏูู ุชุตููู</h3>
                        <form id="categoryForm" onsubmit="saveCategory(event)">
                            <input type="hidden" id="categoryId">
                            <div class="form-inline">
                                <input type="text" id="categoryName" placeholder="ุงุณู ุงูุชุตููู (ูุซุงู: ุดูุงุญู)" required>
                                <button type="submit" class="btn btn-primary" id="categorySubmitBtn">
                                    <i class="fas fa-plus"></i>
                                    ุฅุถุงูุฉ
                                </button>
                                <button type="button" class="btn btn-secondary" onclick="resetCategoryForm()">
                                    <i class="fas fa-times"></i>
                                    ุฅูุบุงุก
                                </button>
                            </div>
                        </form>
                    </div>
                    
                    <div class="categories-display">
                        <h3><i class="fas fa-list"></i> ุงูุชุตูููุงุช ุงูุญุงููุฉ</h3>
                        <div id="categoriesList" class="categories-list"></div>
                    </div>
                </div>
            </div>
            
            <!-- ุงูุฅุนุฏุงุฏุงุช -->
            <div class="admin-page" id="settingsPage">
                <div class="content-card">
                    <div class="card-header">
                        <h2 class="card-title">
                            <i class="fas fa-cogs"></i>
                            ุฅุนุฏุงุฏุงุช ุงููุธุงู
                        </h2>
                        <button class="btn btn-secondary" onclick="showAdminPage('orders')">
                            <i class="fas fa-arrow-right"></i>
                            ุฑุฌูุน
                        </button>
                    </div>
                    
                    <div class="settings-section">
                        <h3><i class="fas fa-database"></i> ุฅุนุฏุงุฏุงุช Supabase</h3>
                        
                        <div class="contact-info" style="margin-bottom:25px">
                            <div class="contact-header">
                                <i class="fas fa-info-circle"></i>
                                <h4>ููููุฉ ุงูุญุตูู ุนูู ุงูุจูุงูุงุช</h4>
                            </div>
                            <ol style="text-align:right;line-height:2">
                                <li>ุงูุชุญ <a href="https://supabase.com" target="_blank" style="color:#fff">supabase.com</a></li>
                                <li>ุงุฎุชุฑ ูุดุฑูุนู โ Settings โ API</li>
                                <li>ุงูุณุฎ URL ู anon/public key</li>
                            </ol>
                        </div>
                        
                        <div class="form-group">
                            <label><i class="fas fa-link"></i> Supabase URL</label>
                            <input type="text" id="supabaseUrl" placeholder="https://xxxxx.supabase.co" dir="ltr">
                        </div>
                        
                        <div class="form-group">
                            <label><i class="fas fa-key"></i> Supabase Anon Key</label>
                            <input type="password" id="supabaseKey" placeholder="eyJhbGciOi..." dir="ltr">
                            <small>ุณูุชู ุญูุธูุง ูุญููุงู ูู ุงููุชุตูุญ</small>
                        </div>
                        
                        <div class="form-actions">
                            <button class="btn btn-primary" onclick="saveSupabaseSettings()">
                                <i class="fas fa-save"></i>
                                ุญูุธ ุงูุฅุนุฏุงุฏุงุช
                            </button>
                            <button class="btn btn-success" onclick="testSupabaseConnection()">
                                <i class="fas fa-plug"></i>
                                ุงุฎุชุจุงุฑ ุงูุงุชุตุงู
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>
    
    <!-- ========== ุงูููุงูุฐ ุงูููุจุซูุฉ ========== -->
    
    <!-- ุฏุฎูู ุงููุฏูุฑ -->
    <div class="modal" id="adminLoginModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3><i class="fas fa-user-shield"></i> ุฏุฎูู ุงููุฏูุฑ</h3>
                <button class="modal-close" onclick="closeAdminLoginModal()">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label>ูููุฉ ุงููุฑูุฑ</label>
                    <input type="password" id="adminPassword" placeholder="ุฃุฏุฎู ูููุฉ ุงููุฑูุฑ">
                    <small><i class="fas fa-info-circle"></i> ุงูุงูุชุฑุงุถูุฉ: admin123</small>
                </div>
                <div class="form-group">
                    <label>ุฑูู ูุงุชูู (ุงุฎุชูุงุฑู)</label>
                    <input type="tel" id="adminPhone" placeholder="01XXXXXXXXX">
                    <small><i class="fas fa-info-circle"></i> ุณูุธูุฑ ูู ููุญุฉ ุงูุชุญูู</small>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="closeAdminLoginModal()">
                    <i class="fas fa-times"></i> ุฅูุบุงุก
                </button>
                <button class="btn btn-primary" onclick="loginAdmin()">
                    <i class="fas fa-sign-in-alt"></i> ุฏุฎูู
                </button>
            </div>
        </div>
    </div>
    
    <!-- ุงูุณูุฉ -->
    <div class="modal" id="cartModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3><i class="fas fa-shopping-cart"></i> ุณูุฉ ุงูุชุณูู</h3>
                <button class="modal-close" onclick="closeCartModal()">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <div class="cart-items" id="cartItemsContainer"></div>
                
                <div class="cart-summary">
                    <div class="summary-row">
                        <span>ุนุฏุฏ ุงูููุชุฌุงุช:</span>
                        <span id="cartItemsCount">0</span>
                    </div>
                    <div class="summary-row">
                        <span>ุงููุฌููุน:</span>
                        <span id="cartSubtotal">0 ุฌ.ู</span>
                    </div>
                    <div class="summary-row summary-total">
                        <span>ุงูุฅุฌูุงูู:</span>
                        <span id="cartTotal">0 ุฌ.ู</span>
                    </div>
                </div>
                
                <div class="form-group">
                    <label><i class="fas fa-phone-alt"></i> ุฑูู ูุงุชูู *</label>
                    <input type="tel" id="customerPhone" placeholder="01XXXXXXXXX" required>
                    <small><i class="fas fa-info-circle"></i> ููุชูุงุตู ูุชุฃููุฏ ุงูุทูุจ</small>
                </div>
                
                <div class="form-group">
                    <label><i class="fas fa-comment-dots"></i> ููุงุญุธุงุช (ุงุฎุชูุงุฑู)</label>
                    <textarea id="orderNotes" placeholder="ุฃู ููุงุญุธุงุช ุฃู ุทูุจุงุช ุฎุงุตุฉ..." rows="3"></textarea>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="closeCartModal()">
                    <i class="fas fa-times"></i> ุฅูุบุงุก
                </button>
                <button class="btn btn-success" onclick="placeOrder()">
                    <i class="fas fa-paper-plane"></i> ุชุฃููุฏ ุงูุทูุจ
                </button>
            </div>
        </div>
    </div>
    
    <!-- ูุฌุงุญ ุงูุทูุจ -->
    <div class="modal" id="orderSuccessModal">
        <div class="modal-content">
            <div class="modal-header success-header">
                <h3><i class="fas fa-check-circle"></i> ุชู ุงุณุชูุงู ุทูุจู ุจูุฌุงุญ</h3>
                <button class="modal-close" onclick="closeOrderSuccessModal()">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <div class="success-content">
                    <div class="success-icon">
                        <i class="fas fa-check-circle"></i>
                    </div>
                    <h3>ุดูุฑุงู ูู!</h3>
                    <p>ุชู ุงุณุชูุงู ุทูุจู ุจูุฌุงุญ ูุณูุชูุงุตู ูุนู ุงููุฏูุฑ ูุฑูุจุงู</p>
                    <div class="order-number-box">
                        <span>ุฑูู ุงูุทูุจ:</span>
                        <strong id="orderNumber">#0000</strong>
                        <small>ุงุญูุธ ูุฐุง ุงูุฑูู</small>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-primary full-width" onclick="closeOrderSuccessModal()">
                    <i class="fas fa-home"></i> ุงูุนูุฏุฉ ูููุชุฌุฑ
                </button>
            </div>
        </div>
    </div>
    
    <!-- Toast -->
    <div class="toast" id="toast">
        <div class="toast-icon"><i class="fas fa-check"></i></div>
        <div class="toast-content">
            <h4 id="toastTitle">ูุฌุงุญ</h4>
            <p id="toastMessage">ุชูุช ุงูุนูููุฉ ุจูุฌุงุญ</p>
        </div>
        <button class="toast-close" onclick="hideToast()">
            <i class="fas fa-times"></i>
        </button>
    </div>

    <script src="script.js"></script>
</body>
</html>