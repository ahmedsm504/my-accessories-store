<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>اونلاينو | متجرك الإلكتروني المتكامل</title>
    <meta name="description" content="اونلاينو - أفضل متجر لإكسسوارات الجوالات والكمبيوتر - منتجات أصلية بأسعار منافسة">
    
    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;700;900&family=Tajawal:wght@400;500;700;800&family=Almarai:wght@400;700;800&display=swap" rel="stylesheet">
    
    <!-- Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    
    <!-- Styles -->
    <link rel="stylesheet" href="styles.css">
    
    <!-- Supabase -->
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
</head>
<body>
    <!-- ========== شاشة التحميل ========== -->
    <div class="loading-screen" id="loadingScreen">
        <div class="loading-content">
            <div class="loading-logo">
                <div class="logo-icon loading-icon">
                    <i class="fas fa-bolt"></i>
                </div>
            </div>
            <h1 class="loading-title">اونلاينو</h1>
            <p class="loading-subtitle">متجرك الإلكتروني الأول</p>
            <div class="loading-spinner">
                <div class="spinner-ring"></div>
                <div class="spinner-ring"></div>
                <div class="spinner-ring"></div>
            </div>
            <p class="loading-text">جاري تحميل المنتجات...</p>
        </div>
    </div>
    
    <!-- ========== المتجر العام ========== -->
    <div class="public-container" id="publicContainer">
        <header class="header" id="mainHeader">
            <div class="header-content">
                <a href="#" class="logo" onclick="showStore(); return false;">
                    <div class="logo-icon">
                        <i class="fas fa-bolt"></i>
                    </div>
                    <div class="logo-text">
                        <span class="logo-title">اونلاينو</span>
                        <span class="logo-subtitle">متجرك الإلكتروني الأول</span>
                    </div>
                </a>
                
                <div class="header-actions">
                    <button class="cart-btn" onclick="openCartModal()" title="سلة التسوق">
                        <i class="fas fa-shopping-bag"></i>
                        <span class="cart-count" id="cartCount">0</span>
                    </button>
                    
                    <button class="admin-btn" onclick="openAdminLoginModal()">
                        <i class="fas fa-user-shield"></i>
                        <span>لوحة التحكم</span>
                    </button>
                </div>
            </div>
        </header>
        
        <main class="store-content">
            <section class="hero-section">
                <div class="hero-bg"></div>
                <div class="hero-particles">
                    <div class="particle"></div>
                    <div class="particle"></div>
                    <div class="particle"></div>
                    <div class="particle"></div>
                    <div class="particle"></div>
                </div>
                <div class="hero-content">
                    <div class="hero-badge">
                        <i class="fas fa-star"></i>
                        <span>الأفضل في مصر</span>
                    </div>
                    <h1 class="hero-title">
                        اكتشف عالم
                        <span class="gradient-text">التكنولوجيا</span>
                    </h1>
                    <p class="hero-subtitle">منتجات أصلية • أسعار تنافسية • ضمان حقيقي • خدمة عملاء متميزة</p>
                    
                    <div class="hero-features">
                        <div class="feature">
                            <div class="feature-icon"><i class="fas fa-rocket"></i></div>
                            <span>توصيل فوري</span>
                        </div>
                        <div class="feature">
                            <div class="feature-icon"><i class="fas fa-shield-alt"></i></div>
                            <span>ضمان أصلي</span>
                        </div>
                        <div class="feature">
                            <div class="feature-icon"><i class="fas fa-headphones-alt"></i></div>
                            <span>دعم 24/7</span>
                        </div>
                        <div class="feature">
                            <div class="feature-icon"><i class="fas fa-certificate"></i></div>
                            <span>منتجات معتمدة</span>
                        </div>
                    </div>
                </div>
            </section>
            
            <section class="store-filters">
                <div class="search-box">
                    <i class="fas fa-search search-icon"></i>
                    <input type="text" id="searchInput" placeholder="ابحث عن شاحن، كابل، سماعة، جراب...">
                    <button class="search-btn" onclick="searchProducts()">
                        <span>بحث</span>
                        <i class="fas fa-arrow-left"></i>
                    </button>
                </div>
                
                <div class="category-filters" id="categoryFilters"></div>
            </section>
            
            <div class="products-section">
                <div class="section-header">
                    <h2><i class="fas fa-fire"></i> أحدث المنتجات</h2>
                    <p>اكتشف أفضل العروض والمنتجات المميزة</p>
                </div>
                <div class="products-grid" id="productsContainer"></div>
            </div>
        </main>
        
        <footer class="footer">
            <div class="footer-content">
                <div class="footer-section">
                    <div class="footer-logo">
                        <div class="logo-icon">
                            <i class="fas fa-bolt"></i>
                        </div>
                        <div>
                            <h3>اونلاينو</h3>
                            <p>متجرك الإلكتروني الموثوق</p>
                        </div>
                    </div>
                </div>
                <div class="footer-section">
                    <h4>روابط سريعة</h4>
                    <ul>
                        <li><a href="#"><i class="fas fa-chevron-left"></i> المنتجات</a></li>
                        <li><a href="#"><i class="fas fa-chevron-left"></i> العروض</a></li>
                        <li><a href="#"><i class="fas fa-chevron-left"></i> من نحن</a></li>
                    </ul>
                </div>
                <div class="footer-section">
                    <h4>تواصل معنا</h4>
                    <div class="social-links">
                        <a href="#" class="social-btn"><i class="fab fa-facebook-f"></i></a>
                        <a href="#" class="social-btn"><i class="fab fa-instagram"></i></a>
                        <a href="#" class="social-btn"><i class="fab fa-whatsapp"></i></a>
                        <a href="#" class="social-btn"><i class="fab fa-twitter"></i></a>
                    </div>
                </div>
            </div>
            <div class="footer-bottom">
                <p>© 2024 اونلاينو - جميع الحقوق محفوظة</p>
            </div>
        </footer>
    </div>
    
    <!-- ========== لوحة تحكم المدير ========== -->
    <div class="admin-container" id="adminContainer">
        <header class="header admin-header">
            <div class="header-content">
                <div class="logo">
                    <div class="logo-icon admin-icon">
                        <i class="fas fa-gauge-high"></i>
                    </div>
                    <div class="logo-text">
                        <span class="logo-title">لوحة التحكم</span>
                        <span class="logo-subtitle">إدارة شاملة</span>
                    </div>
                </div>
                
                <div class="header-actions">
                    <div class="admin-info">
                        <i class="fas fa-phone-alt"></i>
                        <span id="adminPhoneNumber">01XXXXXXXXX</span>
                    </div>
                    <button class="admin-btn logout-btn" onclick="logoutAdmin()">
                        <i class="fas fa-sign-out-alt"></i>
                        <span>خروج</span>
                    </button>
                </div>
            </div>
        </header>
        
        <nav class="admin-nav">
            <button class="nav-tab active" onclick="showAdminPage('orders', this)">
                <i class="fas fa-clipboard-list"></i>
                <span>الطلبات</span>
            </button>
            <button class="nav-tab" onclick="showAdminPage('products', this)">
                <i class="fas fa-boxes"></i>
                <span>المنتجات</span>
            </button>
            <button class="nav-tab" onclick="showAdminPage('add-product', this)">
                <i class="fas fa-plus-square"></i>
                <span>إضافة منتج</span>
            </button>
            <button class="nav-tab" onclick="showAdminPage('categories', this)">
                <i class="fas fa-tags"></i>
                <span>التصنيفات</span>
            </button>
            <button class="nav-tab" onclick="showAdminPage('reports', this)">
                <i class="fas fa-chart-bar"></i>
                <span>التقارير</span>
            </button>
            <button class="nav-tab" onclick="showAdminPage('settings', this)">
                <i class="fas fa-cogs"></i>
                <span>الإعدادات</span>
            </button>
        </nav>
        
        <main class="admin-content">
            <!-- الطلبات -->
            <div class="admin-page active" id="ordersPage">
                <div class="content-card">
                    <div class="card-header">
                        <h2 class="card-title">
                            <i class="fas fa-clipboard-list"></i>
                            إدارة الطلبات
                        </h2>
                        <button class="btn btn-primary" onclick="refreshOrders()">
                            <i class="fas fa-sync-alt"></i>
                            تحديث
                        </button>
                    </div>
                    
                    <div class="contact-info">
                        <div class="contact-header">
                            <i class="fas fa-phone-volume"></i>
                            <h3>أرقام التواصل السريع</h3>
                        </div>
                        <p>تواصل مع الزبائن عبر الواتساب لتأكيد الطلبات</p>
                        <div class="contact-numbers" id="orderContacts"></div>
                    </div>
                    
                    <div class="orders-grid" id="ordersContainer"></div>
                </div>
            </div>
            
            <!-- المنتجات -->
            <div class="admin-page" id="productsPage">
                <div class="content-card">
                    <div class="card-header">
                        <h2 class="card-title">
                            <i class="fas fa-boxes"></i>
                            إدارة المنتجات
                        </h2>
                        <button class="btn btn-primary" onclick="showAdminPage('add-product')">
                            <i class="fas fa-plus"></i>
                            منتج جديد
                        </button>
                    </div>
                    
                    <div class="search-box admin-search">
                        <i class="fas fa-search search-icon"></i>
                        <input type="text" id="adminSearchInput" placeholder="ابحث في المنتجات..." onkeyup="adminSearchProducts()">
                    </div>
                    
                    <div class="category-filters" id="adminCategoryFilters"></div>
                    <div class="products-grid" id="adminProductsContainer"></div>
                </div>
            </div>
            
            <!-- إضافة منتج -->
            <div class="admin-page" id="add-productPage">
                <div class="content-card">
                    <div class="card-header">
                        <h2 class="card-title" id="productFormTitle">
                            <i class="fas fa-plus-square"></i>
                            إضافة منتج جديد
                        </h2>
                        <button class="btn btn-secondary" onclick="showAdminPage('products')">
                            <i class="fas fa-arrow-right"></i>
                            رجوع
                        </button>
                    </div>
                    
                    <form id="productForm" onsubmit="saveProduct(event)" class="product-form">
                        <input type="hidden" id="productId">
                        <input type="hidden" id="currentImageUrl">
                        
                        <div class="form-grid">
                            <div class="form-group">
                                <label><i class="fas fa-tag"></i> اسم المنتج *</label>
                                <input type="text" id="productName" required placeholder="مثال: شاحن سامسونج 25 وات">
                            </div>
                            
                            <div class="form-group">
                                <label><i class="fas fa-list-ul"></i> التصنيف *</label>
                                <select id="productCategory" required>
                                    <option value="">اختر التصنيف</option>
                                </select>
                            </div>
                            
                            <div class="form-group">
                                <label><i class="fas fa-money-bill-wave"></i> السعر (ج.م) *</label>
                                <input type="number" id="productPrice" required min="0" step="0.01" placeholder="0.00">
                            </div>
                            
                            <div class="form-group">
                                <label><i class="fas fa-layer-group"></i> الكمية *</label>
                                <input type="number" id="productQuantity" required min="0" placeholder="0">
                            </div>
                            
                            <div class="form-group">
                                <label><i class="fas fa-toggle-on"></i> الحالة *</label>
                                <select id="productStatus" required>
                                    <option value="available">متوفر</option>
                                    <option value="unavailable">غير متوفر</option>
                                </select>
                            </div>
                        </div>
                        
                        <div class="form-group full-width">
                            <label><i class="fas fa-images"></i> صورة المنتج</label>
                            <div class="image-upload-container">
                                <div class="image-preview" id="imagePreview">
                                    <i class="fas fa-cloud-upload-alt"></i>
                                    <p>انقر أو اسحب الصورة هنا</p>
                                    <small>أقصى حجم: 10 MB • سيتم الضغط تلقائياً</small>
                                </div>
                                
                                <div class="image-upload-controls">
                                    <input type="file" id="productImage" accept="image/*" style="display:none" onchange="handleImageSelect(event)">
                                    <button type="button" class="btn btn-secondary" onclick="document.getElementById('productImage').click()">
                                        <i class="fas fa-upload"></i>
                                        اختر صورة
                                    </button>
                                    <button type="button" class="btn btn-danger" onclick="removeProductImage()" id="removeImageBtn" style="display:none">
                                        <i class="fas fa-trash-alt"></i>
                                        حذف
                                    </button>
                                </div>
                                
                                <div class="upload-progress" id="uploadProgress" style="display:none">
                                    <div class="progress-bar">
                                        <div class="progress-fill" id="progressFill"></div>
                                    </div>
                                    <p id="progressText">جاري الرفع... 0%</p>
                                </div>
                                
                                <div class="upload-info">
                                    <i class="fas fa-info-circle"></i>
                                    <span>سيتم ضغط الصورة تلقائياً إلى 500 KB وتصغيرها إلى 800×800 بكسل</span>
                                </div>
                            </div>
                        </div>
                        
                        <div class="form-group full-width">
                            <label><i class="fas fa-align-right"></i> الوصف</label>
                            <textarea id="productDescription" placeholder="وصف تفصيلي للمنتج..." rows="5"></textarea>
                        </div>
                        
                        <div class="form-actions">
                            <button type="submit" class="btn btn-primary" id="productSubmitBtn">
                                <i class="fas fa-save"></i>
                                حفظ المنتج
                            </button>
                            <button type="button" class="btn btn-secondary" onclick="resetProductForm()">
                                <i class="fas fa-redo"></i>
                                إعادة تعيين
                            </button>
                        </div>
                    </form>
                </div>
            </div>
            
            <!-- التصنيفات -->
            <div class="admin-page" id="categoriesPage">
                <div class="content-card">
                    <div class="card-header">
                        <h2 class="card-title">
                            <i class="fas fa-tags"></i>
                            إدارة التصنيفات
                        </h2>
                        <button class="btn btn-secondary" onclick="showAdminPage('products')">
                            <i class="fas fa-arrow-right"></i>
                            رجوع
                        </button>
                    </div>
                    
                    <div class="info-banner">
                        <i class="fas fa-lightbulb"></i>
                        <div>
                            <h4>نصيحة مهمة</h4>
                            <p>نظّم منتجاتك في تصنيفات واضحة لتسهيل البحث على الزبائن</p>
                        </div>
                    </div>
                    
                    <div class="category-form-card">
                        <h3><i class="fas fa-plus-circle"></i> إضافة / تعديل تصنيف</h3>
                        <form id="categoryForm" onsubmit="saveCategory(event)">
                            <input type="hidden" id="categoryId">
                            <div class="form-inline">
                                <input type="text" id="categoryName" placeholder="اسم التصنيف (مثال: شواحن)" required>
                                <button type="submit" class="btn btn-primary" id="categorySubmitBtn">
                                    <i class="fas fa-plus"></i>
                                    إضافة
                                </button>
                                <button type="button" class="btn btn-secondary" onclick="resetCategoryForm()">
                                    <i class="fas fa-times"></i>
                                    إلغاء
                                </button>
                            </div>
                        </form>
                    </div>
                    
                    <div class="categories-display">
                        <h3><i class="fas fa-list"></i> التصنيفات الحالية</h3>
                        <div id="categoriesList" class="categories-list"></div>
                    </div>
                </div>
            </div>
            
            <!-- التقارير -->
            <div class="admin-page" id="reportsPage">
                <div class="content-card">
                    <div class="card-header">
                        <h2 class="card-title">
                            <i class="fas fa-chart-bar"></i>
                            التقارير والإحصائيات
                        </h2>
                        <button class="btn btn-primary" onclick="displayReports()">
                            <i class="fas fa-sync-alt"></i>
                            تحديث
                        </button>
                    </div>
                    
                    <div id="reportsContainer">
                        <!-- سيتم ملؤها بواسطة JavaScript -->
                    </div>
                </div>
            </div>
            
            <!-- الإعدادات -->
            <div class="admin-page" id="settingsPage">
                <div class="content-card">
                    <div class="card-header">
                        <h2 class="card-title">
                            <i class="fas fa-cogs"></i>
                            إعدادات النظام
                        </h2>
                        <button class="btn btn-secondary" onclick="showAdminPage('orders')">
                            <i class="fas fa-arrow-right"></i>
                            رجوع
                        </button>
                    </div>
                    
                    <div class="settings-section">
                        <h3><i class="fas fa-database"></i> إعدادات Supabase</h3>
                        
                        <div class="contact-info" style="margin-bottom:25px">
                            <div class="contact-header">
                                <i class="fas fa-info-circle"></i>
                                <h4>كيفية الحصول على البيانات</h4>
                            </div>
                            <ol style="text-align:right;line-height:2">
                                <li>افتح <a href="https://supabase.com" target="_blank" style="color:#fff">supabase.com</a></li>
                                <li>اختر مشروعك → Settings → API</li>
                                <li>انسخ URL و anon/public key</li>
                            </ol>
                        </div>
                        
                        <div class="form-group">
                            <label><i class="fas fa-link"></i> Supabase URL</label>
                            <input type="text" id="supabaseUrl" placeholder="https://xxxxx.supabase.co" dir="ltr">
                        </div>
                        
                        <div class="form-group">
                            <label><i class="fas fa-key"></i> Supabase Anon Key</label>
                            <input type="password" id="supabaseKey" placeholder="eyJhbGciOi..." dir="ltr">
                            <small>سيتم حفظها محلياً في المتصفح</small>
                        </div>
                        
                        <div class="form-actions">
                            <button class="btn btn-primary" onclick="saveSupabaseSettings()">
                                <i class="fas fa-save"></i>
                                حفظ الإعدادات
                            </button>
                            <button class="btn btn-success" onclick="testSupabaseConnection()">
                                <i class="fas fa-plug"></i>
                                اختبار الاتصال
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>
    
    <!-- ========== النوافذ المنبثقة ========== -->
    
    <!-- دخول المدير -->
    <div class="modal" id="adminLoginModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3><i class="fas fa-user-shield"></i> دخول المدير</h3>
                <button class="modal-close" onclick="closeAdminLoginModal()">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label>كلمة المرور</label>
                    <input type="password" id="adminPassword" placeholder="أدخل كلمة المرور">
                    <small><i class="fas fa-info-circle"></i> الافتراضية: admin123</small>
                </div>
                <div class="form-group">
                    <label>رقم هاتفك (اختياري)</label>
                    <input type="tel" id="adminPhone" placeholder="01XXXXXXXXX">
                    <small><i class="fas fa-info-circle"></i> سيظهر في لوحة التحكم</small>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="closeAdminLoginModal()">
                    <i class="fas fa-times"></i> إلغاء
                </button>
                <button class="btn btn-primary" onclick="loginAdmin()">
                    <i class="fas fa-sign-in-alt"></i> دخول
                </button>
            </div>
        </div>
    </div>
    
    <!-- السلة -->
    <div class="modal" id="cartModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3><i class="fas fa-shopping-bag"></i> سلة التسوق</h3>
                <button class="modal-close" onclick="closeCartModal()">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <div class="cart-items" id="cartItemsContainer"></div>
                
                <div class="cart-summary">
                    <div class="summary-row">
                        <span>عدد المنتجات:</span>
                        <span id="cartItemsCount">0</span>
                    </div>
                    <div class="summary-row">
                        <span>المجموع:</span>
                        <span id="cartSubtotal">0 ج.م</span>
                    </div>
                    <div class="summary-row summary-total">
                        <span>الإجمالي:</span>
                        <span id="cartTotal">0 ج.م</span>
                    </div>
                </div>
                
                <div class="form-group">
                    <label><i class="fas fa-phone-alt"></i> رقم هاتفك *</label>
                    <input type="tel" id="customerPhone" placeholder="01XXXXXXXXX" required>
                    <small><i class="fas fa-info-circle"></i> للتواصل وتأكيد الطلب</small>
                </div>
                
                <div class="form-group">
                    <label><i class="fas fa-comment-dots"></i> ملاحظات (اختياري)</label>
                    <textarea id="orderNotes" placeholder="أي ملاحظات أو طلبات خاصة..." rows="3"></textarea>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="closeCartModal()">
                    <i class="fas fa-times"></i> إلغاء
                </button>
                <button class="btn btn-success" onclick="placeOrder()">
                    <i class="fas fa-paper-plane"></i> تأكيد الطلب
                </button>
            </div>
        </div>
    </div>
    
    <!-- نجاح الطلب -->
    <div class="modal" id="orderSuccessModal">
        <div class="modal-content">
            <div class="modal-header success-header">
                <h3><i class="fas fa-check-circle"></i> تم استلام طلبك بنجاح</h3>
                <button class="modal-close" onclick="closeOrderSuccessModal()">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <div class="success-content">
                    <div class="success-icon">
                        <i class="fas fa-check-circle"></i>
                    </div>
                    <h3>شكراً لك!</h3>
                    <p>تم استلام طلبك بنجاح وسيتواصل معك المدير قريباً</p>
                    <div class="order-number-box">
                        <span>رقم الطلب:</span>
                        <strong id="orderNumber">#0000</strong>
                        <small>احفظ هذا الرقم</small>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-primary full-width" onclick="closeOrderSuccessModal()">
                    <i class="fas fa-home"></i> العودة للمتجر
                </button>
            </div>
        </div>
    </div>
    
    <!-- Toast -->
    <div class="toast" id="toast">
        <div class="toast-icon"><i class="fas fa-check"></i></div>
        <div class="toast-content">
            <h4 id="toastTitle">نجاح</h4>
            <p id="toastMessage">تمت العملية بنجاح</p>
        </div>
        <button class="toast-close" onclick="hideToast()">
            <i class="fas fa-times"></i>
        </button>
    </div>

    <script src="script.js"></script>
</body>
</html>