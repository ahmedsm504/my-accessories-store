<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ูุญู ุงูุฅูุณุณูุงุฑุงุช - ูุชุฌุฑ ุฅููุชุฑููู</title>
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;700;900&family=Tajawal:wght@400;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="styles.css">
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
</head>
<body>
    <!-- Public Store (Customer View) -->
    <div class="public-container" id="publicContainer">
        <header class="header">
            <a href="#" class="logo">
                <div class="logo-icon">
                    <i class="fas fa-gem"></i>
                </div>
                <div class="logo-text">ูุญู ุงูุฅูุณุณูุงุฑุงุช</div>
            </a>
            
            <div class="header-actions">
                <button class="cart-btn" onclick="openCartModal()">
                    <i class="fas fa-shopping-cart"></i>
                    <span class="cart-count" id="cartCount">0</span>
                </button>
                
                <button class="admin-btn" onclick="openAdminLoginModal()">
                    <i class="fas fa-user-shield"></i>
                    ุฏุฎูู ุงููุฏูุฑ
                </button>
            </div>
        </header>
        
        <main class="store-content">
            <section class="hero-section">
                <h1 class="hero-title">๐ ุฃูุถู ุงูุฅูุณุณูุงุฑุงุช ููุฌูุงูุงุช ูุงูููุจููุชุฑ</h1>
                <p class="hero-subtitle">ุงูุชุดู ุชุดูููุชูุง ุงููุงุณุนุฉ ูู ุงูุดูุงุญูุ ุงููุงุจูุงุชุ ุงูุณูุงุนุงุชุ ุงูุฃุบุทูุฉ ูุฃูุซุฑ</p>
                
                <div class="hero-features">
                    <div class="feature">
                        <div class="feature-icon">
                            <i class="fas fa-shipping-fast"></i>
                        </div>
                        <span class="feature-text">ุชูุตูู ุณุฑูุน</span>
                    </div>
                    <div class="feature">
                        <div class="feature-icon">
                            <i class="fas fa-shield-alt"></i>
                        </div>
                        <span class="feature-text">ุถูุงู ุงูุฌูุฏุฉ</span>
                    </div>
                    <div class="feature">
                        <div class="feature-icon">
                            <i class="fas fa-headset"></i>
                        </div>
                        <span class="feature-text">ุฏุนู ููู</span>
                    </div>
                </div>
            </section>
            
            <section class="store-filters">
                <div class="search-box">
                    <input type="text" id="searchInput" placeholder="๐ ุงุจุญุซ ุนู ููุชุฌ (ุดุงุญูุ ูุงุจูุ ุณูุงุนุฉุ ุฅูุฎ)...">
                    <button class="search-btn" onclick="searchProducts()">
                        <i class="fas fa-search"></i> ุจุญุซ
                    </button>
                </div>
                
                <div class="category-filters" id="categoryFilters">
                </div>
            </section>
            
            <div class="products-grid" id="productsContainer">
            </div>
        </main>
    </div>
    
    <!-- Admin Dashboard -->
    <div class="admin-container" id="adminContainer">
        <header class="header">
            <div class="logo">
                <div class="logo-icon">
                    <i class="fas fa-user-shield"></i>
                </div>
                <div class="logo-text">ููุญุฉ ุชุญูู ุงููุฏูุฑ</div>
            </div>
            
            <div class="header-actions">
                <div style="background: none; padding: 0; color: var(--primary);">
                    <div class="contact-numbers">
                        <div class="contact-number" style="color: var(--primary);">
                            <i class="fas fa-phone"></i>
                            <span id="adminPhoneNumber">01XXXXXXXXX</span>
                        </div>
                    </div>
                </div>
                
                <button class="admin-btn" onclick="logoutAdmin()">
                    <i class="fas fa-sign-out-alt"></i>
                    ุฎุฑูุฌ
                </button>
            </div>
        </header>
        
        <nav class="admin-nav">
            <button class="nav-tab active" onclick="showAdminPage('orders', this)">
                <i class="fas fa-clipboard-list"></i> ุงูุทูุจุงุช
            </button>
            <button class="nav-tab" onclick="showAdminPage('products', this)">
                <i class="fas fa-boxes"></i> ุงูููุชุฌุงุช
            </button>
            <button class="nav-tab" onclick="showAdminPage('add-product', this)">
                <i class="fas fa-plus-circle"></i> ุฅุถุงูุฉ ููุชุฌ
            </button>
            <button class="nav-tab" onclick="showAdminPage('categories', this)">
                <i class="fas fa-tags"></i> ุงูุชุตูููุงุช
            </button>
            <button class="nav-tab" onclick="showAdminPage('settings', this)">
                <i class="fas fa-cog"></i> ุงูุฅุนุฏุงุฏุงุช
            </button>
        </nav>
        
        <main class="admin-content">
            <div class="admin-page active" id="ordersPage">
                <div class="content-card">
                    <div class="card-header">
                        <h2 class="card-title">
                            <i class="fas fa-clipboard-list"></i> ุฅุฏุงุฑุฉ ุงูุทูุจุงุช
                        </h2>
                        <button class="btn btn-primary" onclick="refreshOrders()">
                            <i class="fas fa-sync-alt"></i> ุชุญุฏูุซ
                        </button>
                    </div>
                    
                    <div class="contact-info">
                        <h3>๐ ุฃุฑูุงู ุงูุชูุงุตู ูุน ุงูุฒุจุงุฆู</h3>
                        <p>ุชูุงุตู ูุน ุงูุฒุจุงุฆู ุนุจุฑ ุงููุงุชุณุงุจ ูุชุฃููุฏ ุงูุทูุจุงุช ูุงูุชูุงุตูู</p>
                        <div class="contact-numbers" id="orderContacts">
                        </div>
                    </div>
                    
                    <div class="orders-grid" id="ordersContainer">
                    </div>
                </div>
            </div>
            
            <div class="admin-page" id="productsPage">
                <div class="content-card">
                    <div class="card-header">
                        <h2 class="card-title">
                            <i class="fas fa-boxes"></i> ุฅุฏุงุฑุฉ ุงูููุชุฌุงุช
                        </h2>
                        <button class="btn btn-primary" onclick="showAdminPage('add-product')">
                            <i class="fas fa-plus"></i> ุฅุถุงูุฉ ููุชุฌ ุฌุฏูุฏ
                        </button>
                    </div>
                    
                    <div class="search-box" style="margin-bottom: 25px;">
                        <input type="text" id="adminSearchInput" placeholder="๐ ุงุจุญุซ ุนู ููุชุฌ..." onkeyup="adminSearchProducts()">
                    </div>
                    
                    <div class="category-filters" id="adminCategoryFilters">
                    </div>
                    
                    <div class="products-grid" id="adminProductsContainer">
                    </div>
                </div>
            </div>
            
            <div class="admin-page" id="addProductPage">
                <div class="content-card">
                    <div class="card-header">
                        <h2 class="card-title" id="productFormTitle">
                            <i class="fas fa-plus-circle"></i> ุฅุถุงูุฉ ููุชุฌ ุฌุฏูุฏ
                        </h2>
                        <button class="btn btn-secondary" onclick="showAdminPage('products')">
                            <i class="fas fa-arrow-right"></i> ุฑุฌูุน
                        </button>
                    </div>
                    
                    <form id="productForm" onsubmit="saveProduct(event)">
                        <input type="hidden" id="productId" value="">
                        
                        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px; margin-bottom: 25px;">
                            <div class="form-group">
                                <label>ุงุณู ุงูููุชุฌ *</label>
                                <input type="text" id="productName" required>
                            </div>
                            <div class="form-group">
                                <label>ุงูุชุตููู *</label>
                                <select id="productCategory" required>
                                    <option value="">ุงุฎุชุฑ ุงูุชุตููู</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label>ุงูุณุนุฑ (ุฌููู) *</label>
                                <input type="number" id="productPrice" required min="0" step="0.01">
                            </div>
                            <div class="form-group">
                                <label>ุงููููุฉ *</label>
                                <input type="number" id="productQuantity" required min="0">
                            </div>
                            <div class="form-group">
                                <label>ุงูุญุงูุฉ *</label>
                                <select id="productStatus" required>
                                    <option value="available">ูุชููุฑ</option>
                                    <option value="unavailable">ุบูุฑ ูุชููุฑ</option>
                                </select>
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label>ุฑุงุจุท ุงูุตูุฑุฉ (ุงุฎุชูุงุฑู)</label>
                            <input type="url" id="productImageUrl" placeholder="https://example.com/image.jpg">
                            <p style="color: #666; font-size: 0.85em; margin-top: 5px;">
                                <i class="fas fa-info-circle"></i> ุฃุฏุฎู ุฑุงุจุท ุตูุฑุฉ ุงูููุชุฌ ูู ุงูุฅูุชุฑูุช (ูุซุงู: Unsplash, Pexels)
                            </p>
                        </div>
                        
                        <div class="form-group">
                            <label>ุงููุตู</label>
                            <textarea id="productDescription" placeholder="ูุตู ุงูููุชุฌ..." style="width: 100%; height: 120px;"></textarea>
                        </div>
                        
                        <div class="form-group" style="display: flex; gap: 15px; margin-top: 30px;">
                            <button type="submit" class="btn btn-primary" id="productSubmitBtn">
                                <i class="fas fa-save"></i> ุญูุธ ุงูููุชุฌ
                            </button>
                            <button type="button" class="btn btn-secondary" onclick="resetProductForm()">
                                <i class="fas fa-redo"></i> ุฅุนุงุฏุฉ ุชุนููู
                            </button>
                        </div>
                    </form>
                </div>
            </div>
            
            <div class="admin-page" id="categoriesPage">
                <div class="content-card">
                    <div class="card-header">
                        <h2 class="card-title">
                            <i class="fas fa-tags"></i> ุฅุฏุงุฑุฉ ุงูุชุตูููุงุช
                        </h2>
                        <button class="btn btn-secondary" onclick="showAdminPage('products')">
                            <i class="fas fa-arrow-right"></i> ุฑุฌูุน
                        </button>
                    </div>
                    
                    <div style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); padding: 20px; border-radius: 15px; color: white; margin-bottom: 30px;">
                        <p style="line-height: 1.8; display: flex; align-items: center; gap: 10px;">
                            <i class="fas fa-info-circle"></i> ุฃุถู ุชุตูููุงุช ูุชูุธูู ููุชุฌุงุชู. ุงูุชุตูููุงุช ุชุญูุธ ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช.
                        </p>
                    </div>
                    
                    <div style="background: white; padding: 25px; border-radius: 15px; box-shadow: 0 5px 20px rgba(0,0,0,0.05); margin-bottom: 25px;">
                        <h3 style="color: var(--primary); margin-bottom: 20px; font-size: 1.3em;">
                            <i class="fas fa-plus"></i> ุฅุถุงูุฉ/ุชุนุฏูู ุชุตููู
                        </h3>
                        <form id="categoryForm" onsubmit="saveCategory(event)" style="display: flex; gap: 15px; align-items: flex-end; flex-wrap: wrap;">
                            <input type="hidden" id="categoryId" value="">
                            <div style="flex: 1; min-width: 200px;">
                                <label>ุงุณู ุงูุชุตููู *</label>
                                <input type="text" id="categoryName" placeholder="ุงุณู ุงูุชุตููู (ูุซุงู: ุดูุงุญู)" required style="width: 100%;">
                            </div>
                            <button type="submit" class="btn btn-primary" id="categorySubmitBtn" style="white-space: nowrap;">
                                <i class="fas fa-plus"></i> ุฅุถุงูุฉ
                            </button>
                            <button type="button" class="btn btn-secondary" onclick="resetCategoryForm()" style="white-space: nowrap;">
                                <i class="fas fa-times"></i> ุฅูุบุงุก
                            </button>
                        </form>
                    </div>
                    
                    <div style="background: white; padding: 25px; border-radius: 15px; box-shadow: 0 5px 20px rgba(0,0,0,0.05);">
                        <h3 style="color: var(--primary); margin-bottom: 20px; font-size: 1.3em;">
                            <i class="fas fa-list"></i> ุงูุชุตูููุงุช ุงูุญุงููุฉ
                        </h3>
                        <div id="categoriesList" class="categories-list" style="display: flex; gap: 10px; flex-wrap: wrap; margin-top: 15px;">
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="admin-page" id="settingsPage">
                <div class="content-card">
                    <div class="card-header">
                        <h2 class="card-title">
                            <i class="fas fa-cog"></i> ุฅุนุฏุงุฏุงุช ุงููุธุงู
                        </h2>
                        <button class="btn btn-secondary" onclick="showAdminPage('orders')">
                            <i class="fas fa-arrow-right"></i> ุฑุฌูุน
                        </button>
                    </div>
                    
                    <div style="background: #f8f9fa; padding: 25px; border-radius: 15px; margin-bottom: 25px;">
                        <h3 style="color: var(--primary); margin-bottom: 20px; font-size: 1.3em;">
                            <i class="fas fa-database"></i> ุฅุนุฏุงุฏุงุช Supabase
                        </h3>
                        
                        <div class="contact-info" style="background: linear-gradient(135deg, var(--info), #118ab2); margin-bottom: 20px;">
                            <h3><i class="fas fa-info-circle"></i> ูุนูููุงุช ุงูุงุชุตุงู ุจู Supabase</h3>
                            <p>ุฃุฏุฎู ุจูุงูุงุช ุงุชุตุงู Supabase ุงูุฎุงุตุฉ ุจู ููุง. ุงุญุตู ุนูููุง ูู Supabase Dashboard โ Settings โ API</p>
                        </div>
                        
                        <div class="form-group">
                            <label>Supabase URL</label>
                            <input type="text" id="supabaseUrl" placeholder="https://xxxxxxxx.supabase.co" value="https://uljvprdjdqvvyenbxxpv.supabase.co">
                        </div>
                        
                        <div class="form-group">
                            <label>Supabase Anon Key</label>
                            <input type="password" id="supabaseKey" placeholder="eyJhbGciOiJIUzI1NiIs..." value="sb_publishable_m7pZYKZgy3-LQeV26og_hg_iezPuo8U">
                        </div>
                        
                        <div style="display: flex; gap: 15px; margin-top: 25px;">
                            <button class="btn btn-primary" onclick="saveSupabaseSettings()">
                                <i class="fas fa-save"></i> ุญูุธ ุงูุฅุนุฏุงุฏุงุช
                            </button>
                            <button class="btn btn-danger" onclick="testSupabaseConnection()">
                                <i class="fas fa-plug"></i> ุงุฎุชุจุงุฑ ุงูุงุชุตุงู
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>
    
    <!-- Modals -->
    <div class="modal" id="adminLoginModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3><i class="fas fa-user-shield"></i> ุฏุฎูู ุงููุฏูุฑ</h3>
                <button class="modal-close" onclick="closeAdminLoginModal()">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label>ูููุฉ ุงููุฑูุฑ</label>
                    <input type="password" id="adminPassword" placeholder="ุฃุฏุฎู ูููุฉ ูุฑูุฑ ุงููุฏูุฑ">
                    <p style="color: #666; font-size: 0.9em; margin-top: 10px;">
                        <i class="fas fa-info-circle"></i> ูููุฉ ุงููุฑูุฑ ุงูุงูุชุฑุงุถูุฉ: admin123
                    </p>
                </div>
                
                <div class="form-group">
                    <label>ุฑูู ูุงุชูู (ุงุฎุชูุงุฑู)</label>
                    <input type="tel" id="adminPhone" placeholder="01XXXXXXXXX" value="01123456789">
                    <p style="color: #666; font-size: 0.9em; margin-top: 10px;">
                        <i class="fas fa-info-circle"></i> ุณูุธูุฑ ูุฐุง ุงูุฑูู ูู ููุญุฉ ุงูุชุญูู ููุชูุงุตู ูุน ุงูุฒุจุงุฆู
                    </p>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="closeAdminLoginModal()">
                    <i class="fas fa-times"></i> ุฅูุบุงุก
                </button>
                <button class="btn btn-primary" onclick="loginAdmin()">
                    <i class="fas fa-sign-in-alt"></i> ุฏุฎูู
                </button>
            </div>
        </div>
    </div>
    
    <div class="modal" id="cartModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3><i class="fas fa-shopping-cart"></i> ุณูุฉ ุงูุชุณูู</h3>
                <button class="modal-close" onclick="closeCartModal()">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <div class="cart-items" id="cartItemsContainer">
                </div>
                
                <div class="cart-summary">
                    <div class="summary-row">
                        <span>ุนุฏุฏ ุงูููุชุฌุงุช:</span>
                        <span id="cartItemsCount">0</span>
                    </div>
                    <div class="summary-row">
                        <span>ุงููุฌููุน:</span>
                        <span id="cartSubtotal">0 ุฌ.ู</span>
                    </div>
                    <div class="summary-row summary-total">
                        <span>ุงูุฅุฌูุงูู:</span>
                        <span id="cartTotal">0 ุฌ.ู</span>
                    </div>
                </div>
                
                <div class="form-group">
                    <label>ุฑูู ูุงุชูู *</label>
                    <input type="tel" id="customerPhone" placeholder="01XXXXXXXXX" required>
                    <p style="color: #666; font-size: 0.9em; margin-top: 10px;">
                        <i class="fas fa-info-circle"></i> ูุฐุง ุงูุฑูู ุณูุณุงุนุฏ ุงููุฏูุฑ ุนูู ุงูุชูุงุตู ูุนู ูุชุฃููุฏ ุงูุทูุจ
                    </p>
                </div>
                
                <div class="form-group">
                    <label>ููุงุญุธุงุช ุฅุถุงููุฉ (ุงุฎุชูุงุฑู)</label>
                    <textarea id="orderNotes" placeholder="ููุงุญุธุงุช ุญูู ุงูุทูุจ..." rows="3"></textarea>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="closeCartModal()">
                    <i class="fas fa-times"></i> ุฅูุบุงุก
                </button>
                <button class="btn btn-success" onclick="placeOrder()">
                    <i class="fas fa-paper-plane"></i> ุชุฃููุฏ ุงูุทูุจ
                </button>
            </div>
        </div>
    </div>
    
    <div class="modal" id="orderSuccessModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3><i class="fas fa-check-circle"></i> ุชู ุงุณุชูุงู ุทูุจู</h3>
                <button class="modal-close" onclick="closeOrderSuccessModal()">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <div style="text-align: center; padding: 20px;">
                    <div style="font-size: 4em; color: var(--success); margin-bottom: 20px;">
                        <i class="fas fa-check-circle"></i>
                    </div>
                    <h3 style="margin-bottom: 15px; color: var(--primary);">ุดูุฑุงู ูู!</h3>
                    <p style="color: #666; margin-bottom: 20px; line-height: 1.6;">
                        ุชู ุงุณุชูุงู ุทูุจู ุจูุฌุงุญ ูุณูุชูุงุตู ูุนู ุงููุฏูุฑ ูุฑูุจุงู ุนูู ุงูุฑูู ุงูุฐู ูุฏูุชู.
                    </p>
                    <div style="background: #f8f9fa; padding: 20px; border-radius: 12px; margin-bottom: 20px;">
                        <p style="font-weight: 700; margin-bottom: 10px;">ุฑูู ุงูุทูุจ: <span id="orderNumber">#0000</span></p>
                        <p style="color: #666; font-size: 0.9em;">ุงุญูุธ ูุฐุง ุงูุฑูู ููุชุงุจุนุฉ ุทูุจู</p>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-primary" onclick="closeOrderSuccessModal()" style="width: 100%;">
                    <i class="fas fa-home"></i> ุงูุนูุฏุฉ ุฅูู ุงููุชุฌุฑ
                </button>
            </div>
        </div>
    </div>
    
    <!-- Toast Notification -->
    <div class="toast" id="toast">
        <div class="toast-icon">
            <i class="fas fa-check"></i>
        </div>
        <div class="toast-content">
            <h4 id="toastTitle">ูุฌุงุญ</h4>
            <p id="toastMessage">ุชูุช ุงูุนูููุฉ ุจูุฌุงุญ</p>
        </div>
        <button class="toast-close" onclick="hideToast()">
            <i class="fas fa-times"></i>
        </button>
    </div>

    <script src="script.js"></script>
</body>
</html>